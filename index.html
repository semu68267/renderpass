<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>빠른 견적 | 01project</title>
<style>
  :root{
    --bg:#0b0f15; --card:#121826; --fg:#e6edf7; --muted:#9aa4b2;
    --accent:#3b82f6; --accent-2:#60a5fa; --ring: rgba(59,130,246,.45);
  }
  *{box-sizing:border-box}
  body{
    margin:0; background:radial-gradient(1200px 800px at 70% -10%, rgba(59,130,246,.12), transparent 60%), var(--bg);
    color:var(--fg); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", Arial, "Apple Color Emoji", "Segoe UI Emoji";
  }
  .wrap{max-width:1100px; margin:0 auto; padding:32px 20px 56px}
  header h1{margin:0 0 8px; font-size:28px; letter-spacing:-.02em}
  header p{margin:0; color:var(--muted)}
  .grid{display:grid; gap:16px; grid-template-columns:repeat(12,1fr); margin-top:28px}
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0)) , var(--card);
    border:1px solid rgba(255,255,255,.06); border-radius:16px; padding:18px;
  }
  .span-4{grid-column:span 4}
  .span-6{grid-column:span 6}
  .span-8{grid-column:span 8}
  .span-12{grid-column:span 12}
  @media (max-width:920px){ .span-8,.span-6,.span-4{grid-column:span 12} }

  .label{display:block; font-size:13px; color:var(--muted); margin-bottom:8px}
  .seg{display:flex; gap:10px; flex-wrap:wrap}

  /* 유형 체크박스 + 장수 */
  .pill-check{display:flex; align-items:center; gap:8px}
  .pill-check input{display:none}
  .pill-check label{
    display:inline-flex; align-items:center; gap:10px;
    cursor:pointer; user-select:none; padding:10px 12px; border-radius:10px;
    border:1px solid rgba(255,255,255,.08); background:#0f1624; color:#cbd5e1; font-size:14px;
    transition:all .18s ease;
  }
  .pill-check input:checked + label{
    background:linear-gradient(180deg, var(--accent), var(--accent-2));
    color:#020617; border-color:transparent; font-weight:700;
  }
  .qty{
    width:96px; display:inline-flex; align-items:center; justify-content:space-between;
    background:#0b1220; border:1px solid rgba(255,255,255,.08); border-radius:10px; padding:6px 8px;
  }
  .qty button{
    width:24px; height:24px; border-radius:6px; background:#0f1624; color:#cbd5e1;
    border:1px solid rgba(255,255,255,.08); cursor:pointer; font-weight:800;
  }
  .qty input{
    width:44px; background:transparent; border:none; text-align:center; font-size:16px; font-weight:800;
    color:var(--fg); -webkit-text-fill-color:var(--fg); caret-color:var(--fg);
  }
  /* iOS/Safari 숫자 스핀 제거 */
  input[type=number]{ -moz-appearance:textfield; }
  input[type=number]::-webkit-outer-spin-button,
  input[type=number]::-webkit-inner-spin-button{ -webkit-appearance:none; margin:0; }
  .qty[hidden]{display:none!important}

  /* 라디오(퀄리티/자료) */
  .seg input[type=radio]{display:none}
  .seg .radio{
    user-select:none; cursor:pointer; padding:10px 12px; border-radius:10px;
    border:1px solid rgba(255,255,255,.08); background:#0f1624; color:#cbd5e1; font-size:14px; transition:all .18s ease;
  }
  .seg input[type=radio]:checked + .radio{
    background:linear-gradient(180deg, var(--accent), var(--accent-2));
    color:#020617; border-color:transparent; font-weight:700;
  }

  .total{
    display:flex; align-items:center; justify-content:space-between; gap:12px;
    padding:22px; border-radius:16px;
    background:linear-gradient(120deg, rgba(59,130,246,.18), rgba(2,6,23,.6) 70%), #0b1220;
    border:1px solid rgba(59,130,246,.35);
  }
  .total .price{font-size:40px; font-weight:800; letter-spacing:-.02em}
  .cta{
    display:inline-flex; align-items:center; gap:10px; padding:12px 16px; border-radius:12px;
    background:linear-gradient(180deg, var(--accent), var(--accent-2)); color:#071019; font-weight:800; border:none; cursor:pointer;
    box-shadow:0 10px 30px rgba(59,130,246,.35); transition:transform .12s ease;
  }
  .cta:hover{transform:translateY(-1px)}
  .fine{font-size:12px; color:var(--muted)}
  .big{font-size:18px; margin:6px 0 2px}

  /* 요약 큰 카드 */
  .summary-list{display:grid; gap:10px}
  .summary-item{
    display:flex; align-items:center; justify-content:space-between; gap:8px;
    padding:14px 16px; border-radius:12px;
    background:#0f1624; border:1px solid rgba(255,255,255,.08);
    font-size:18px; font-weight:800;
  }
  .summary-item .muted{font-weight:600; color:#9fb5d9}
  footer{margin-top:24px; color:var(--muted); font-size:12px}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div style="font-size:12px; letter-spacing:.2em; color:#60a5fa; text-transform:uppercase">INSTANT QUOTE</div>
      <h1>렌더링 빠른 견적</h1>
      <p>옵션을 선택하면 실시간으로 계산됩니다. (단위: 만원)</p>
    </header>

    <section class="grid">
      <!-- 유형 (복수 선택 + 각 유형별 장수) -->
      <div class="card span-12">
        <div class="label">프로젝트 유형(복수 선택 가능) · 각 유형별 장수</div>
        <div class="seg" id="types">
          <!-- 실내 -->
          <div class="pill-check">
            <input type="checkbox" id="type-interior" data-type="interior" checked>
            <label for="type-interior">실내 투시</label>
            <div class="qty" id="qty-interior">
              <button data-minus="interior">-</button>
              <input type="number" min="1" step="1" value="1" data-qty="interior" aria-label="실내 장수">
              <button data-plus="interior">+</button>
            </div>
          </div>
          <!-- 실외 -->
          <div class="pill-check">
            <input type="checkbox" id="type-exterior" data-type="exterior">
            <label for="type-exterior">실외 투시</label>
            <div class="qty" id="qty-exterior" hidden>
              <button data-minus="exterior">-</button>
              <input type="number" min="1" step="1" value="1" data-qty="exterior" aria-label="실외 장수">
              <button data-plus="exterior">+</button>
            </div>
          </div>
          <!-- 조감 -->
          <div class="pill-check">
            <input type="checkbox" id="type-bird" data-type="bird">
            <label for="type-bird">조감</label>
            <div class="qty" id="qty-bird" hidden>
              <button data-minus="bird">-</button>
              <input type="number" min="1" step="1" value="1" data-qty="bird" aria-label="조감 장수">
              <button data-plus="bird">+</button>
            </div>
          </div>
          <!-- 광역 -->
          <div class="pill-check">
            <input type="checkbox" id="type-area" data-type="area">
            <label for="type-area">광역</label>
            <div class="qty" id="qty-area" hidden>
              <button data-minus="area">-</button>
              <input type="number" min="1" step="1" value="1" data-qty="area" aria-label="광역 장수">
              <button data-plus="area">+</button>
            </div>
          </div>
        </div>
      </div>

      <!-- 퀄리티 -->
      <div class="card span-6">
        <div class="label">표현 레벨</div>
        <div class="seg" id="quality">
          <input type="radio" name="quality" id="q-low" value="low" checked>
          <label class="radio" for="q-low">베이식</label>
          <input type="radio" name="quality" id="q-mid" value="mid">
          <label class="radio" for="q-mid">프로</label>
          <input type="radio" name="quality" id="q-high" value="high">
          <label class="radio" for="q-high">엘리트</label>
        </div>
      </div>

      <!-- 자료 제공 -->
      <div class="card span-6">
        <div class="label">자료 제공</div>
        <div class="seg" id="assets">
          <input type="radio" name="assets" id="a-both" value="both" checked>
          <label class="radio" for="a-both">도면·모델 모두 제공</label>
          <input type="radio" name="assets" id="a-model" value="modelOnly">
          <label class="radio" for="a-model">3D 모델만 제공(도X·모O)</label>
          <input type="radio" name="assets" id="a-none" value="none">
          <label class="radio" for="a-none">자료 없음(도X·모X)</label>
        </div>
      </div>

      <!-- 합계 -->
      <div class="span-12">
        <div class="total">
          <div class="big" style="margin:0">예상 견적</div>
          <div class="price" id="price">- 만원</div>
          <button class="cta" id="ctaBtn">견적 문의하기</button>
        </div>
      </div>

      <!-- 큰 선택 요약 -->
      <div class="card span-12">
        <div class="label">선택 요약</div>
        <div id="summaryShort" class="big" style="margin:0 0 10px 0; font-weight:700"></div>
        <div id="breakdown" class="summary-list"></div>
      </div>
    </section>

    <footer>© 01project · “0에서 1로, 상상을 현실로 공간과 브랜드를 디자인합니다.” 임</footer>
  </div>

<script>
/* 가격표 (만원) — interior.high.none = 70 유지 */
const PRICE_TABLE = {
  interior: { low:{both:10,modelOnly:15,none:20}, mid:{both:20,modelOnly:30,none:40}, high:{both:30,modelOnly:50,none:70} },
  exterior: { low:{both:20,modelOnly:25,none:30}, mid:{both:30,modelOnly:40,none:50}, high:{both:50,modelOnly:75,none:100} },
  bird:     { low:{both:30,modelOnly:50,none:75}, mid:{both:60,modelOnly:80,none:100}, high:{both:100,modelOnly:150,none:200} },
  area:     { low:{both:60,modelOnly:80,none:100}, mid:{both:100,modelOnly:150,none:200}, high:{both:150,modelOnly:200,none:300} }
};
const PRETTY = {
  type:{ interior:"실내 투시", exterior:"실외 투시", bird:"조감", area:"광역" },
  quality:{ low:"베이식", mid:"프로", high:"엘리트" },
  assets:{ both:"도면·모델 모두 제공", modelOnly:"3D 모델만 제공", none:"자료 없음" }
};
const els = {
  types: document.querySelector('#types'),
  price: document.querySelector('#price'),
  summaryShort: document.querySelector('#summaryShort'),
  breakdown: document.querySelector('#breakdown'),
  cta: document.querySelector('#ctaBtn')
};
function getSelectedQuality(){ return document.querySelector('[name="quality"]:checked').value; }
function getSelectedAssets(){ return document.querySelector('[name="assets"]:checked').value; }
/* 0.5배 누적 계산: n장 = P + 0.5P*(n-1) */
function priceWithQuantity(base, n){ n=Math.max(1,parseInt(n||1,10)); return base + 0.5*base*(n-1); }
function formatKR(n){
  const hasPoint = Math.abs(n % 1) > 0;
  return hasPoint ? n.toLocaleString('ko-KR',{maximumFractionDigits:1}) : n.toLocaleString('ko-KR');
}
function getSelectedTypes(){
  const selected=[]; els.types.querySelectorAll('input[type="checkbox"][data-type]').forEach(cb=>{
    const type=cb.dataset.type; const qtyInput=document.querySelector(`input[data-qty="${type}"]`);
    const qty=parseInt(qtyInput.value||"1",10); if(cb.checked){ selected.push({type,qty}); }
  });
  return selected.length?selected:[{type:'interior',qty:1}];
}
function calc(){
  const q=getSelectedQuality(), a=getSelectedAssets(), selected=getSelectedTypes();
  let total=0; els.breakdown.innerHTML='';

  // 상단 한 줄 요약 (크게)
  const oneLine = selected.map(s=>`${PRETTY.type[s.type]} ${s.qty}장`).join(' · ');
  els.summaryShort.textContent = `${oneLine} · ${PRETTY.quality[q]} · ${PRETTY.assets[a]}`;

  // 상세 라인들
  selected.forEach(({type,qty})=>{
    const base=PRICE_TABLE[type][q][a];
    const subtotal=priceWithQuantity(base,qty); total+=subtotal;

    const item=document.createElement('div');
    item.className='summary-item';
    item.innerHTML = `
      <span>${PRETTY.type[type]} <span class="muted">·</span> ${qty}장 <span class="muted">·</span> 기본가 ${formatKR(base)}</span>
      <span>→ 합계 <strong>${formatKR(subtotal)} 만원</strong></span>`;
    els.breakdown.appendChild(item);
  });

  els.price.textContent = `${formatKR(total)} 만원`;
}
function bindQtyUI(){
  // 체크박스 토글 시 장수 입력 show/hide
  document.querySelectorAll('input[type="checkbox"][data-type]').forEach(cb=>{
    const type=cb.dataset.type; const box=document.getElementById(`qty-${type}`);
    function toggle(){ box.hidden=!cb.checked; calc(); }
    cb.addEventListener('change', toggle); toggle();
  });
  // + / - 버튼
  document.querySelectorAll('.qty button').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const type=btn.dataset.plus||btn.dataset.minus;
      const input=document.querySelector(`input[data-qty="${type}"]`);
      let v=parseInt(input.value||"1",10);
      if(btn.dataset.plus) v++; else v=Math.max(1,v-1);
      input.value=v; calc();
    });
  });
  // 직접 입력
  document.querySelectorAll('.qty input[type="number"]').forEach(inp=>{
    inp.addEventListener('input', ()=>{ if(inp.value===''||parseInt(inp.value,10)<1) inp.value=1; calc(); });
    inp.addEventListener('blur', ()=>{ if(parseInt(inp.value,10)<1) inp.value=1; calc(); });
  });
}
['quality','assets'].forEach(id=>{ document.querySelectorAll(`#${id} input`).forEach(i=> i.addEventListener('change', calc)); });

async function copyText(txt){
  try{ await navigator.clipboard.writeText(txt); return true; }
  catch(e){ const ta=document.createElement('textarea'); ta.value=txt; ta.setAttribute('readonly','');
    ta.style.position='fixed'; ta.style.top='-1000px'; document.body.appendChild(ta); ta.select();
    let ok=false; try{ ok=document.execCommand('copy'); }catch(_){} document.body.removeChild(ta); return ok; }
}
function messageForCopy(total){
  const q=PRETTY.quality[getSelectedQuality()], a=PRETTY.assets[getSelectedAssets()];
  const t=getSelectedTypes().map(({type,qty})=>`${PRETTY.type[type]} ${qty}장`).join(', ');
  return `[빠른 견적 문의]
유형: ${t}
레벨: ${q}
자료: ${a}
예상가: ${total}만원

프로젝트 개요(용도/면적/컷/데드라인)를 보내주세요 :)`;
}
document.getElementById('ctaBtn').addEventListener('click', async ()=>{
  const totalNum = Number(document.getElementById('price').textContent.replace(' 만원','').replace(/,/g,''));
  const ok = await copyText(messageForCopy(totalNum));
  const btn = document.getElementById('ctaBtn');
  btn.textContent = ok ? "복사됨! 메신저에 붙여넣기" : "복사 실패… 길게 눌러 복사";
  setTimeout(()=> btn.textContent="견적 문의하기", 1800);
});

bindQtyUI();
calc();
</script>
</body>
</html>
